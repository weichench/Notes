# 使用小觅摄像头

 

## 录制数据集

```
	roslaunch mynt_eye_ros_wrapper mynteye.launch 

rosbag record -O mynteye_data.bag /mynteye/imu/data_raw /mynteye/left/image_raw /mynteye/left_rect/image_rect /mynteye/right/image_raw /mynteye/right_rect/image_rect


rosrun vins vins_node /home/slam/catkin_ws_2/src/git_project/VINS-Fusion/config/mynteye/mynteye_stereo_imu_config.yaml
修改配置文件  ：  multiple_thread: 0  ，  estimate_td: 0 ？ ——之前跑euroc数据集的时候一直没有打开这个？？ 
```



___________

## 结构线特征提取节点

+ 修改bag文件名，及时间戳的范围
+ 修改话题名称  yaml文件及程序内





__________

## 结合IMU探测消失点

+ 检查探测出的消失点是否确实是在归一化平面坐标系的
  +  将图像平面的线转到归一化平面，然后检查该线与该消失点的点线距离是否符合要求
+ 将阈值放大一些，检查重力消失点所得的直线是否确实是垂直线



检测出的消失点夹角可能在70多度

原程序对另一个不正交的消失点方向，直接取正交方向是否有问题？





## 消失点检测程序的参数

+ 检测阈值，图片尺寸，相机内参







## structVIO 要修改的参数

+ bag文件导入的路径，及其时间范围 _ros文件

+ 相机的配置文件

+ focallength_——estiamtor文件与feature_mange文件

+ To_picture中相机的内参

  + 这里的相机参数与原始的会有出入，
  
  

## 程序的调整

+ 先不使用点线关联的约束，包括三角化与优化
+ 直接固定Rws，





_________________

## 测试

+ 原地转圈问题可能有点大
+ 从一开始就将Rws固定住，则发生偏移
+ 直接使用MH_05的程序，包含点线关联约束，Z轴方向会翘起来，Rws在乱摆——————最终跑飞掉了——发现这个程序是始终不固定Rws的
+ 所以，接下来调整为，稳定后固定Rws，发现，在开头有一段，几乎所有的线特征都被剔除掉了
+ 不添加点线关联约束到优化中，计算关联点线的平均距离， 0.2689



## Rws

+ 源程序中，在优化中，整个窗口的航向角不可观，会飘，所以使得优化后，0帧的航向角原转回来





________

## 让历史线尽量好看一些

```c++
 if(fabs(it_per_id.ptw1(0) - it_per_id.ptw2(0)) > 8 || fabs(it_per_id.ptw1(1) - it_per_id.ptw2(1)) > 8 
	      || fabs(it_per_id.ptw1(2) - it_per_id.ptw2(2)) > 8 )
	  
	   continue;
//发送线时，删除长度过长的






```

