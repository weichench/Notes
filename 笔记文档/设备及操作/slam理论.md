+ 左乘扰动还是右乘，都是表象，本质都是在局部坐标系上给一个微小的旋转量，比如Rwc，微小的旋转发生在c系，所以就是Rws*exp(fai ^), 若是（Rws）.transpose  , 则展开以后，在左边

_________

### 有关特征的边缘化

当marge最老帧时，为啥要marge最老帧上观测到的特征点**？———主要是为了使得先验矩阵稀疏**

**当Marge次新帧时，IMU 的预积分要传递到下一帧**



**在构建本次先验项时，也要将上一次的先验项添加，但是要将上一次先验项里，本次要marge掉的变量marge掉。比如，marge最老帧的时候，要将上一次先验项里的当前窗口内的最老帧marge掉。当marge次新帧的时候，要将上一次先验中的属于当前窗口的次新帧marge掉**

**事实上，那些被marge掉的特征点，其实还是存在于窗口内的**，理解为，边缘化信息就是给剩下的变量之间添加先验约束



**快速理解边缘化——当要marg掉最老帧，那么就将最老帧及最老帧上观测到的特征点，及相关联的帧拿出来，构建一个优化问题。通过舒尔补消元，将最老帧及其上观测到的特征点消去。留下来的就是关于保留的相机帧之间的一个约束，这个约束是满足前面说的构建的那个优化的。保留下来的相机帧之间的约束就是先验约束。然后，分解得到先验约束部分的雅克比矩阵（就是固定值了？）及先验残差（会更新），根据此，在下一次滑窗优化时，构建先验约束项。**



## FEJ

+ marge的变量及其观测已经被移除，所以先验项雅克比矩阵无法再更新
+ 保留下来变量及其雅克比在其他的观测中还在不断更新迭代
+ 所以，两部分计算雅克比时的线性化点不一致，——导致信息矩阵分成两部分，相当于额外添加了伪造的信息，使得矩阵零空间发生变化
+ 为了避免，新的雅克比计算时，线性化点与先验项计算雅克比时的保持一致
+ 先验项的信息矩阵固定不变，但残差需要使用一阶泰勒展开不断更新   **bp = bp - J*delta_x, J就表示先验项的信息矩阵**;   
+ 



**求解增量方程时，一般先通过舒尔补将路标点消元，直接求解出相机位姿变量，在代入求解路标点**



______

# 有关线性代数矩阵的



## 矩阵的数值求解线性方程组？E，H



## SVD分解——主成分

### E矩阵分解t，R  ——SVD分解后，构造t，r



## QR分解求Pnp问题中的R,t



_______

## ceres求解对位姿消元，与对路标点消元



___

## 理解E矩阵，H矩阵及其相关数学理论的讲解

https://blog.csdn.net/Zkangsen/article/details/100010742

https://note.youdao.com/ynoteshare1/index.html?id=43ce8e6384a8c06931fea25f4912ebfd&type=note     数学理论

https://blog.csdn.net/electech6/article/details/83818218

https://www.cnblogs.com/pinard/p/6251584.html  **SVD分解**

https://blog.csdn.net/qq_xuanshuang/article/details/79639240  **SVD求解非线性方程组**



________

## Ransac  迭代次数控制

_____________

## Sim(3)位姿图计算，回环检测

_____________

## 旋转

**绕旋转轴，就是依次绕固定轴的叠加   R = R(X)R(Y)R(Z)  依次绕Z,Y,X轴进行旋转**

__________

## IMU预积分

**说白了，就是在绝对位姿值往前递推的时候，计算帧间间隔的位姿相对值**

**一个问题？初始时刻的速度是咋来的？**

_____________

**两点齐次坐标叉乘得线，两线叉乘得交点**



________

**基于带边缘化滑动窗口的DSO ，在无回环时，飘移较少，而基于共视图的ORBslam对回环的依赖较大**

_________

## 光流追踪——带仿射变换的光流——金字塔式的光流

+ 灰度不变假设，受光照影响，图像不能发生过于明显的变化，运动不能过快

__________

## 后端退化问题

如果相机原地不动，滑动窗口一直往前滑，留下无用的优化，甚至导致后端退化———要避免插入的关键帧做无用的优化

+ 在VIO中，又要定期选择关键帧，因为IMU的bias会有飘移，关键帧之间的飘移认为时相同的
+ 所以在VINS中，对于视差较小的，只是直接移除次新帧，窗口并没有往前滑，但是，没有考虑时间过长导致比bias飘移过大
  + VINS中视差的判断，可以通过匹配上特征点的观测变化，新探测到的特征的数量判断
+ ORBslam，只要后端为空，就会插入关键帧，较为宽松的关键帧选择测略，然后再剔除冗余的关键帧
+ 

_______________

## 先从尽量宏观的角度理解系统

+ 差异的对比，优缺点，
+ ORBslam的流程回顾
+ VIOorb与VINS的对比——推及到MSCKF，以及okvis



## 三角化

有的系统（svo，dso），为了速度，非关键帧不提取新的特征点，仅跟踪

按顺序编排的面试题

1. SIFT和SUFT的区别

2. 相似变换、仿射变换、射影变换的区别

3. **Homography（单应矩阵）、Essential（本质矩阵）和Fundamental Matrix（基础矩阵）的区别**

   有关这一部分，通过orbslam可以加深理解

4. **视差与深度的关系**

5. **描述PnP算法**

6. 闭环检测常用方法 ————**回顾orbslam及vins中回环检测的方法**

7. 给一个二值图，求最大连通域

8. **梯度下降法、牛顿法、高斯-牛顿法的区别**

9. 推导一下卡尔曼滤波、描述下粒子滤波

10. **如何求解Ax=b**
    **Ax=b的问题**

11. **什么是极线约束**

12. 单目视觉SLAM中尺寸漂移是怎么产生的————**参考orbslam**

13. 解释SLAM中的绑架问题——**重定位问题，突然丢失帧间位姿跟踪，但有场景地图，不知道在地图中的位置**

14. **描述特征点法和直接法的优缺点**

    **直接法更容易受光照与运动模糊的影响，可以稠密建图，要求帧间运动不能过大**

    

15. EKF和BA的区别————**回顾EKF的大致原理**

    **EKF在当前状态下，线性化展开了一次，对于较远的地方，偏差就有点大了。而非线性优化，每次迭代更新后，重新线性化，**

16. 边缘检测算子有哪些？——**去了解orb，lk光流，lsd+lbd**

17. 简单实现cv::Mat()

18. 10个相机同时看到100个路标点，问BA优化的雅克比矩阵多少维——**对比一下orb与vins中的优化问题构建的差别**

19. **介绍经典的视觉SLAM框架**

20. 介绍下你熟悉的非线性优化库——**基于orbslam与vins，对比一下ceres与g2o**

21. 室内SLAM与自动驾驶SLAM有什么区别？————**从定位的层面，了解业界最新的应用**

22. 什么是紧耦合、松耦合？优缺点。——**回顾之前看过的有关vio的文章**

23. 地图点的构建方法有哪些——**对比orb与vins**

24. **如果对于一个3D点，我们在连续帧之间形成了2D特征点之间的匹配，但是这个匹配中可能存在错误的匹配。请问你如何去构建3D点？**——**ransac及非线性最小二乘优化**

25. RANSAC在选择最佳模型的时候用的判断准则是什么?——**内点最多的，误差最小的，循环次数的控值？**

26. 除了RANSAC之外，还有什么鲁棒估计的方法？————**M估计（广义的最大似然估计）**

27. 3D地图点是怎么存储的？表达方式？——**回顾orbslam**

28. **给你m相机n个点的bundle adjustment。当我们在仿真的时候，在迭代的时候，相机的位姿会很快的接近真值。而地图点却不能很快的收敛这是为什么呢？**

29. LM算法里面那个 λ
    λ 是如何变化的呢？

30. **说一下3D空间的位姿如何去表达?**——李群及李代数，流行空间

31. **李群和李代数的关系**

32. **求导∂R1R2∂R1**
    **∂R1∂R1R2  ——————BCH公式**

33. Mat是如何访问元素的？先访问行还是先访问列？——**—opencv，mat数据形式**

34. 写出单目相机的投影模型，畸变模型。———**—相机的畸变矫正过程——相机标定原理——双目相机的矫正**

36. 给两组已经匹配好的3D点，计算相对位姿变换，写代码——**ICP的原理及实现**

37. **ORB-SLAM初始化的时候为什么要同时计算H矩阵和F矩阵？——当特征共面或纯旋转，E矩阵会自由度退化。继续使用8点法求解E矩阵，则噪声影响多余的自由度，所以同时计算，选择重投影误差更小的**

38. 说一下Dog-Leg算法

39. **Vins-Mono里面什么是边缘化？**First Estimate Jacobian？一致性？可观性？

40. 说一下VINS-Mono的优缺点——**相对于其他基于优化的vio方案的对比**

41. 推导一下VINS-Mono里面的预积分公式

42. 在给定一些有噪声的GPS信号的时候如何去精准的定位？

43. 如何标定IMU与相机之间的外参数？

44. 给你xx误差的GPS，给你xx误差的惯导你怎么得到一个cm级别的地图?

45. 计算H矩阵和F矩阵的时候有什么技巧呢？—**—在《多视图几何》中提到了一种归一化八点法**

46. 给一组点云，从中提取平面。

47. 给一张图片，知道相机与地面之间的相对关系，计算出图的俯视图。

48. 双线性插值如何去做，写公式。

49. 什么是ORB特征? ORB特征的旋转不变性是如何做的? BRIEF算子是怎么提取的

50. ORB-SLAM中的特征是如何提取的？如何均匀化的？——**ORB特征**
    





## 必知

1， **GN 和 LM 的迭代过程及优劣**
2，单应矩阵 H 和基础矩阵 F 的区别（至少两个方面），推导两者的求解过程及改进求解的方法——**参考ORB**
**3，相机在纯旋转下，单应矩阵和基础矩阵怎么应用，单目怎么做到初始化和三角测量**
**4，单目初始化的目的及两种方法——尺度**
5，三角测量的过程及代码实现，**有哪些不确定性及如何提高三角测量的精度**
6，相机标定原理及实现过程，棋盘格有哪些好处
7，**什么是对极约束？基础矩阵 F 的推导过程， F 的秩**
8， RANSAC 的过程及在基础矩阵 F 求解上的应用，代码实现一个例子——**ransac迭代次数的控制**
**9，什么是 BA?推导相机投影模型的雅克比矩阵 J，以及 J 的每一项代表的含义**
**10，求解 BA 问题用的最多的 G2o，说明 G2o 的顶点和边代表的含义以及类型**
**11，解释图优化中图的稀疏性，图优化流程**
**12，边缘化过程及可能存在的问题——FEJ****
**13，解释鲁棒核函数**
14，推导直接法 BA，直接法的分类，三个假设及优劣
15，解释图像非凸性的概念
**16， ICP 算法的流程，哪个坐标系下？推导求解过程两种方法（ SVD 分解和 BA）**
**17，解释相机重投影误差，即间接法，推导重投影误差的 J**
**18，经常说的雅克比有什么作用，它有哪几部分组成？**
**19， PNP 流程及 DLT 求解过程**
20， P3P 求解过程，缺点及改进 EPNP 概述
**21， PNP 与图优化的关系，即 PNP 中的顶点和边在图优化中的表示**



22，图像处理的目的，图像传输 的方式，什么是数字图像和模拟图像
23，解释图像的采样和量化（最近邻采样和插值采样）
24，解释图像质量（层次，对比度，亮度，尺度，尺寸，饱和度，高斯卷积核）
25，像素之间的关系（ 4 近邻， D 近邻， 8 近邻）
26，根据像素之间的关系解释像素之间的连通，连通的两个必要条件。m 连通？怎么提取连通像素组成的区域？
27，像素之间的距离：欧氏距离，城市距离（ D4 距离），棋盘距离（ D8 距离）怎么计算区域之间的距离？
28，三维模型重建流程
29，点为特征点的基本要求：解释 Harris 角点的原理，流程，非极大值抑制，特点
30，解释尺度空间（高斯空间） LOG 算子的流程
31，解释 SIFT 算子流程，特点；fast 算子， ORB 算子，并比较异同
32，如何获取尺度不变性和旋转不变性
33，解释特征描述子，基于直方图的描述子和二进制描述子，特点
34，特征匹配；距离度量（欧式距离，马氏距离，汉明距离）及匹配策略（最近邻搜索和最近邻距离比）————**ORB中对特征匹配的处理**
35，点的齐次坐标和向量齐次坐标的区别，应用
36，相机模型成像过程，及逆过程，逆变换，畸变模型中理想像素点和畸变点的对应数学表达式，并用它解算矫正原理
39，基础矩阵 F 的特点（自由度，秩，奇异值）求解过程（ 8 点法，RANSAC 方法流程），解释 8 点法求解过程中 SVD 分解的奇异值约束，根据奇异值约束对 F 进行重构
40，本质矩阵 E 的特点（自由度，秩，奇异值），求解 E，并用 E 进行相机姿态恢复（用图解释四种姿态，并说明如何旋转正确的姿态（ 2 种策略））
41，单应矩阵 H 的特点（自由度，秩)及应用，求解（ 4 对匹配点和 RANSAC 流程）





42,三角测量流程，求解过程， RANSAC 解算流程，如何减少三角测量的误差
43， pnp 求解过程， p3p 及 epnp
44,BA 求解的三种方法（最速下降法， GN,LM)
45,BA 的数学模型，几种 BA 对的形式求解（ 1,同时优化相机参数和三维点;2，固定三维点坐标，优化相机参数;3，固定相机参数，优化三维点坐标）
46，单目相机内参数共享的 BA 表达
47， SFM：通过相机运动同时恢复相机参数和场景结构，其流程？？？？？细
节？？？？难点？？？？
48，稠密重建：稠密点云获取方式？极线搜索？两个假设（光度一致性和可视性约束？）
49，多视角立体技术的三种方法（ 1,基于体素方法 2,基于空间 patch 扩散方法 3,基于深度图融合方法？流程？特点？）
50，基于深度图融合方法进行多视角重建：优点？全局视角和局部视角的选择？区域生长法扩张？非线性深度优化流程？



___

# 暂时先跳过比较专一的，理论性较深的部分

### 优先考虑怎么做的，什么结果，为什么，比较深得数学理论可先跳过





+ imu状态误差量的递推过程，imu的误差对待估计变量的雅克比矩阵——暂时把预计分的公式记下就可以了
+ 边缘化的概率解释——条件概率——边际概率