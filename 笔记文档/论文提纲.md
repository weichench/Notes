# 融合结构化线特征的vio



+ 1 结构化场景下二参数的结构线
+ 2 系统概述
  + a. 线特征处理节点
  + b. 主节点
+ 3 系统的关键环节
  + 3.1 线特征的提取及匹配
  + 3.2 消失点的提取及结构线的辨识
  + 3.3 由消失点探测结构化场景的方向
  + 3.4 及结构线的初始化
  + 3.5 计算结构线重投影误差对相关变量的雅克比矩阵
  + 3.6 基于滑动窗口模型做紧耦合的联合优化
  + 3.7 线特征的合并
  
+ 4 实验结果



_______



- 1 结构化线特征的定义——The defination of structral lines

- 2 系统概述——System overview 

  - 2.1线特征处理节点
  - 2. 2主节点

- 3 系统的关键环节

  - 3.1 线特征探测及匹配
  - 3.2 辨识结构线及观测结构化场景的全局方向
  - 3.3 结合点特征进行结构线的初始化
  - 3.4 结构线的重投影误差
  - 3.5 点线关联约束
  - 3.6 基于滑动窗口模型做紧耦合的联合优化
  - 3.7 线特征的合并

  4 实验结果



______

## Introduction

1. 背景
   1. 视觉slam出现的背景
   2. 当前slam典型的工作
      1. 特征点法的orbslam,直接法的LSDslam，
      2. 结合imu的MScKf，okvis，vins 
2. 存在的问题
   1. 主流的方案，都使用点特征，弱纹理弱光照条件下，精度差
   2. 没有使用场景的先验几何限制，地图的飘移导致全局精度差，
   
   
   
   + 当前流行的方案使用点特征，并且处理的是一般性的场景，没有使用任何的场景先验几何信息
   + 当场景低纹理，或光照条件差，特征点的质量变差导致地图的飘移变大，全局定位精度差
   + 如图，在像这样低纹理的走廊场景下，机器人真实运动轨迹的起点与终点本来是重合的，但使用经典的ORBslam定位出的轨迹却如图所示，有非常明显的飘移。



+ 然而除了点特征，在像走廊这样的人造建筑物场景下，还存在着一定数量的线特征，如图所示。
+ 相比于点特征，线特征的探测更加稳定，而且线特征可以一定程度上反映场景的几何信息。
+ 更重要的是，在人造建筑物场景下，绝大多数线特征之间的关系只有正交与平行两种。这些相互之间平行或正交的直线方向反映着场景的全局旋转方向。像这样的场景就是所谓的结构化场景，这些平行或正交的直线也被称为结构线。



+ 曼哈顿世界就被用来描述这样的结构化场景。一个曼哈顿世界代表着一个统一朝向的结构化场景。
+ 然而在现实中，更大范围的场景可能是由一些具有不同朝向的结构化场景混合而成的。这样更大范围的场景可以被亚特兰大世界模型描述。一个亚特兰大世界包含了多个具有不同朝向的局部曼哈顿世界。
+ 在大多数的常规视觉slam系统中，全局的旋转方向是根据局部的相对旋转方向累积得到的。所以很明显，局部相对旋转方向的误差也会累积到全局旋转方向上。这就是图中轨迹产生明显飘移的主要原因。然而，如果将结构化场景的几何约束添加到slam中，使用亚特兰大世界模型定义的结构化场景的全局旋转方向将不会再有累积误差。



+ 早期的工作已经表明，同时使用点线特征可以取得比单独使用点特征或线特征更好的效果。但是，这些工作不但没有考虑结构化的几何约束，而且也没有考虑点线特征之间的关联性。通常，他们单独构建点线特征各自的观测约束，然后将这些约束同时添加到统一的优化框架下。但是事实上，如图所示，存在有相当数量的点特征与线特征是共线的。如果可以考虑点线特征共线，一方面，可以为线特征的初始化引入更多的先验信息。另一方面，由于计算误差，恢复出3D空间结构的本应共线的点线特征之间必然存在距离误差。这个距离误差可以被作为一个待优化的误差项，添加到系统的优化环节，从而为系统引入更多的约束，提高定位精度。
+ 
+ 基于上述想法，本文提出了一种融合了结构化线特征的双目VIO系统，同时使用点特征与结构化线特征作为视觉观测的约束。其中，2自由度的3D结构线是被定义在局部曼哈顿世界坐标系下的。结合局部曼哈顿世界的旋转方向与结构线的空间位置，VIO系统便充分受到了场景的结构化约束。并且，系统也利用了点线特征之间可能存在的共线特性。除了利用点特征三角化的结果进行与之共线的结构线特征的三角化，本应共线的点线特征在世界坐标系下的点线距离误差也被转换为曼哈顿世界坐标系下点与点的距离误差，作为待优化项添加到优化环节。
+ 最终，在滑动窗口优化模型的框架下，做紧耦合的融合IMU测量,点特征与结构线特征的重投影误差，共线点线的距离误差的联合优化。



+ 经过在公开数据集与真实场景下的测试，本文提出的融合了结构化线特征的双目VIO系统，在人造建筑物场景下的表现优于当前最先进的VIO系统。

+ 

+ 首先，根据双目视觉的观测，提取点线特征。接着，从提取出的线特征中分辨出结构线，并得到当前帧对结构化场景方向的观测。根据帧间连续的观测，在结构化场景的坐标系下，建立2自由度的3D结构线。根据视觉观测，构建点特征与结构线特征的重投影观测误差。此外，点线特征之间的
+ 因为同时使用了点特征与线特征，点线特征之间的关联性也被考虑。对于被判断为共线的点线特征，其相互之间的距离可以被作为
+ 根据图像平面上对结构线的观测，得到局部结构化场景相对于当前相机位姿的旋转，进而得到这个局部结构化场景的全局旋转方向以及判断是否有新的结构化场景出现。
+ 在局部结构化场景的坐标系下，定义了2自由度的3D结构线，由此构建了结构线的观测约束模型。
+ 此外，对于共线的点线特征，

1. 提出的方法
   1. 基于结构化场景的观测，使用结构化线特征
   2. 
2. 结论





____________

## Related work

​	将当前的工作分类介绍，

1. 有关使用线特征slam的工作
   
   + 尽管基于点特征时视觉slam的主流方法，但在早期的研究中，就有一些研究者尝试将线特征作为landmark
   + W15[26]  早在1997年，使用竖直线，通过两端点表示直线。
   + 后面几年的工作，也都与此类似，像W15[27，28]，都是以两端点表示空间直线，通过直线端点的匹配来进行直线的匹配。直线被当作点一样去处理。但此类方法的缺陷也是明显的，一是过参数化，二是直线的端点并不稳定
   + 此外，以上提到的这些早期的结合点线特征的slam也都是以EKF作为优化的框架。但是，EKF的局限在于：一是其马尔客服的假设，仅考虑了当前时刻与上一时刻的关联性，没有充分考虑全局的关联性。二是EKF在的线性化会引入非线性误差。
   + 
   + W51[30] 提出了正交表示的线，其4自由度的表示方法，可以解觉直线的过参数化问题。后续很多使用线特征的slam都采用这该法，W51[27.31], W65[5],  
   + 其中，W58在ORBslam的基础上，使用普吕克及正交表示参数化线特征，以BA优化的方式，refain the pose of key frames.
   + 除了纯是视觉的slam，一些研究者也将线特征融入到VIO中，W51[25]建立了基于滤波器的结合点线的双目VIO，
   + W51，基于VINS的框架，提出了紧耦合的使用点线特征的单目VIO。
   + 所有以上提到的方法，都没有考虑线特征的结构化约束。即使通过正交表示，4自由度的线特征也比3自由度的点特征更加复杂，其在优化时，收敛的速度也更慢
   
   
   
   
   
   + 近年来，有关结构化特征的视觉slam方法也开始受到了越来越多的关注。已经有一部分工作，通过使用消失点来改进视觉slamW54[20, 21]，和vioW54[22]。但是，他们只是使用线特征来提取消失点，然后使用消失点得到全局的旋转方向。他们并没有使用线特征作为观测约束，在得到消失点后，线特征便不再发挥任何作用。H提出的W64使用了结构线，由消失点表示结构线的方向，在参数平面上的一个点表示线，但他们的参数化方式仍然有4的未知参数，其定义方式较为复杂。而且，他们的系统仅能应对一个单一朝向的结构化场景。W54基于亚特兰大世界模型，将结构线用到了单目VIO系统中，其通过EKF做系统的优化。他们使用线上的点特征进行直线的匹配，但在构建观测约束时，仍然没有考虑点线特征之间的关联性。
   + 
   
   
   
   + 当同时使用了点特征与线特征或结构线线特征时，几乎所有的系统都是独立的建立点线特征各自的观测约束，然后将两者的观测约束放到一个统一的优化框架下。他们都没有考虑点线特征之间存在的关联性。但事实上，真实场景下有相当数量的点特征与线特征是共线的。
   
   + 
   
   1. 早期对线特征slam的研究
      1. PLslam
      2. pLvio
   
2. 使用先验几何限制或结构化约束的slam

3. 使用特征关联的slam





+ W13. 使用了直接法的点线单目  2017
+ W16. 同名的PL——slam    2017
+ W50 点线EKF的VINS    2019
+ W52  鲁棒的双目点线VIO  2018
+ W58  PL SLAM  2019
+ 